<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Parallel Computing • samc</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Parallel Computing">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">samc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/overview.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/article-circuit-theory.html">Circuit Theory</a></li>
    <li><a class="dropdown-item" href="../articles/article-computation-methods.html">Computation Methods</a></li>
    <li><a class="dropdown-item" href="../articles/article-models.html">Models</a></li>
    <li><a class="dropdown-item" href="../articles/performance.html">Performance</a></li>
    <li><a class="dropdown-item" href="../articles/parallel.html">Parallel Computing</a></li>
    <li><a class="dropdown-item" href="../articles/troubleshooting.html">Troubleshooting</a></li>
    <li><a class="dropdown-item" href="../articles/code-snippets.html">Code Snippets</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-data" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Data</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-data">
<li><a class="dropdown-item" href="../articles/data-disconnected.html">Disconnected Data</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><a class="dropdown-item" href="../articles/tutorial-basic.html">Basic Tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-locations.html">Locations</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-ggplot.html">ggplot Visualization</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-temporal.html">Temporal Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-animations.html">Animations</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-multiple-absorption.html">Multiple Absorption</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples">
<li><a class="dropdown-item" href="../articles/example-coinflip.html">Coin Flip</a></li>
    <li><a class="dropdown-item" href="../articles/example-maze-part1.html">Maze (Part 1)</a></li>
    <li><a class="dropdown-item" href="../articles/example-maze-part2.html">Maze (Part 2)</a></li>
    <li><a class="dropdown-item" href="../articles/example-maze-part3.html">Maze (Part 3)</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/andrewmarx/samc"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Parallel Computing</h1>
                        <h4 data-toc-skip class="author">Andrew
Marx</h4>
            
            <h4 data-toc-skip class="date">2024-10-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/andrewmarx/samc/blob/HEAD/vignettes/parallel.Rmd" class="external-link"><code>vignettes/parallel.Rmd</code></a></small>
      <div class="d-none name"><code>parallel.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>As of v2.0.0, the samc package does support the use of multiple cores
for parallelization. Currently, this feature is targeted towards the
<code><a href="../reference/dispersal.html">dispersal()</a></code> function for the
<code>dispersal(samc, init)</code> option. This function is particularly
useful but has a severe performance limitation explained in the <a href="performance.html#special-cases-1">Performance</a> vignette.
Fortunately, this particular case is suitable for parallelization, which
means that multiple cores can be used to drastically reduce the runtime
of the analysis.</p>
<p>Until this feature has been well established, it is recommended that
users compare the results of the non-parallel version with the parallel
version. This can be done efficiently using a scaled-down version of
input data. Once the results for the scaled-down data have been
verified, then the parallel version can be run for the larger full
dataset. When doing this testing, the samc object (create using
<code><a href="../reference/samc.html">samc()</a></code>) will have to be recreated. If you do not, then the
analysis will use cached results from the previous run.</p>
<p>It’s also important to be aware of the distinction between
<em>cores</em> and <em>threads</em>. Roughly, cores are the physical
units of a processor that perform computations. A thread can be thought
of as a set of instructions that will be run on a core. In general, a
core will always be able to run one thread at a time. In this case, for
example, a 4-core processor can run 4 threads. Sometimes, depending on
the processor features (e.g., Intel Hyperthreading), a core can execute
two threads at once. In this case, a 4-core processor could be used to
run 8 threads simultaneously. This means you can potentially break up a
workload into more threads than cores. However, it only works well in
certain types of workloads and may not scale well in other
situations.</p>
</div>
<div class="section level2">
<h2 id="enabling-parallelization">Enabling Parallelization<a class="anchor" aria-label="anchor" href="#enabling-parallelization"></a>
</h2>
<p>To enable parallelization, we just set the number of threads to a
positive integer greater than one:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Assume samc_obj was created using samc()</span></span>
<span></span>
<span><span class="va">samc_obj</span><span class="op">$</span><span class="va">threads</span> <span class="op">&lt;-</span> <span class="fl">4</span></span>
<span><span class="co">#&gt; Important: When setting the number of threads, make sure to use a reasonable number for the machine the code will run on.</span></span>
<span><span class="co">#&gt; Using the maximum number of threads supported by your hardware can make other programs non-responsive. Only do this if nothing else needs to run during the analysis.</span></span>
<span><span class="co">#&gt; Specifying more threads than a machine supports in hardware will likely lead to lost performance.</span></span></code></pre></div>
<p>That’s it. If a function supports parallelization, it will now make
use of multiple threads (4 in this example).</p>
</div>
<div class="section level2">
<h2 id="limitations">Limitations<a class="anchor" aria-label="anchor" href="#limitations"></a>
</h2>
<p>In general, using more cores to solve a problem will not scale
perfectly. In addition, there can be diminishing returns as the number
of cores used increases. Multiple factors that play into this. Users
with very high core count machines (e.g., 32, 64, or 128 cores) may find
that using all of their cores does not provide significant benefit over
a more moderate amount of cores. The only way to know for sure is to
benchmark the analysis at different core counts.</p>
<p>In general, using more cores means that additional memory will need
to be used to solve the problem. The severity of the memory increase
will vary depending on the problem. In the case of
<code><a href="../reference/dispersal.html">dispersal()</a></code>, the memory requirement for additional cores
used is fairly minimal. This means that as long as machines have a
reasonable amount of memory per core, this should not be an issue.</p>
<p>If you use all the cores of a machine at once, it can negatively
affect the performance of other software running. Therefore, if you need
to use your machine for other tasks while the analysis is running, you
will likely need to restrict how many cores you use.</p>
<p>For users with access to supercomputing resources, running a parallel
analysis across different nodes requires more advanced features not
available in the package. Therefore, samc analyses should only be run on
a single node in supercomputers.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrew Marx.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
