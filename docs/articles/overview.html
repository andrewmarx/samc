<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Overview • samc</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Overview">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">samc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/overview.html">Overview</a>
    </li>
    <li>
      <a href="../articles/performance.html">Performance</a>
    </li>
    <li>
      <a href="../articles/troubleshooting.html">Troubleshooting</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tutorial-basic.html">Basic Tutorial</a>
    </li>
    <li>
      <a href="../articles/tutorial-ggplot.html">ggplot Visualization</a>
    </li>
    <li>
      <a href="../articles/tutorial-temporal.html">Temporal Analysis</a>
    </li>
    <li>
      <a href="../articles/tutorial-animations.html">Animations</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/andrewmarx/samc">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Overview</h1>
                        <h4 class="author">Andrew Marx</h4>
            
            <h4 class="date">2020-01-15</h4>
      
      
      <div class="hidden name"><code>overview.Rmd</code></div>

    </div>

    
    
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h2>
<div id="required-data" class="section level3">
<h3 class="hasAnchor">
<a href="#required-data" class="anchor"></a>Required Data</h3>
<p>In order to use this package, two different sets of landscape data are required: <em>resistance</em> and <em>absorption</em>. There are certain requirements for these:</p>
<ul>
<li>They must be 2-dimensional matrices or <code>RasterLayer</code> objects. They have to be the same type.</li>
<li>They must have the same dimensions (number of rows and columns).</li>
<li>
<code>NA</code> data is allowed in the cells, but must match between the sets of data. I.e., if cell <code>[3, 6]</code> of the <em>resistance</em> data has a <code>NA</code> value, then cell <code>[3, 6]</code> of the <em>absorption</em> data must also have a <code>NA</code> value, and vice versa.</li>
</ul>
<p>If using <code>RasterLayer</code> objects, then additional conditions must be met:</p>
<ul>
<li>Both sets of data must have the same coordinate extents.</li>
<li>Both sets of data must use the same coordinate reference system (CRS).</li>
</ul>
</div>
<div id="optional-data" class="section level3">
<h3 class="hasAnchor">
<a href="#optional-data" class="anchor"></a>Optional Data</h3>
<p>The use of landscape fidelity data is optional. By default, the package treats all cells in the landscape data the same and uses a value of <code>0</code> for fidelity. If custom data is desired, then it must meet all of the same requirements listed above for the <em>resistance</em> and <em>absorption</em> landscape data.</p>
</div>
<div id="built-in-example-data" class="section level3">
<h3 class="hasAnchor">
<a href="#built-in-example-data" class="anchor"></a>Built-in Example Data</h3>
<p>The package includes built-in example data. Some of this data was used to create the figures in the SAMC paper, and is used in this tutorial. They are:</p>
<ul>
<li>
<code>ex_res_data</code>: A matrix with landscape resistance data.</li>
<li>
<code>ex_abs_data</code>: A matrix with landscape absorption (mortality) data.</li>
<li>
<code>ex_occ_data</code>: A matrix with landscape occupancy data.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(samc<span class="op">::</span>ex_res_data)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co">#&gt;  num [1:34, 1:202] NA NA NA NA NA NA NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(samc<span class="op">::</span>ex_abs_data)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">#&gt;  num [1:34, 1:202] NA NA NA NA NA NA NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(samc<span class="op">::</span>ex_occ_data)</a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">#&gt;  num [1:34, 1:202] NA NA NA NA NA NA NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb1-7" title="7"></a>
<a class="sourceLine" id="cb1-8" title="8"></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(<span class="kw">raster</span>(samc<span class="op">::</span>ex_res_data, <span class="dt">xmn =</span> <span class="dv">1</span>, <span class="dt">xmx =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">ncol</a></span>(samc<span class="op">::</span>ex_res_data), <span class="dt">ymn =</span> <span class="dv">1</span>, <span class="dt">ymx =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(samc<span class="op">::</span>ex_res_data)),</a>
<a class="sourceLine" id="cb1-10" title="10">     <span class="dt">main =</span> <span class="st">"Example Resistance Data"</span>, <span class="dt">xlab =</span> <span class="st">"x"</span>, <span class="dt">ylab =</span> <span class="st">"y"</span>, <span class="dt">col =</span> <span class="kw">viridis</span>(<span class="dv">256</span>))</a>
<a class="sourceLine" id="cb1-11" title="11"></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(<span class="kw">raster</span>(samc<span class="op">::</span>ex_abs_data, <span class="dt">xmn =</span> <span class="dv">1</span>, <span class="dt">xmx =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">ncol</a></span>(samc<span class="op">::</span>ex_abs_data), <span class="dt">ymn =</span> <span class="dv">1</span>, <span class="dt">ymx =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(samc<span class="op">::</span>ex_abs_data)),</a>
<a class="sourceLine" id="cb1-13" title="13">     <span class="dt">main =</span> <span class="st">"Example Absorption Data"</span>, <span class="dt">xlab =</span> <span class="st">"x"</span>, <span class="dt">ylab =</span> <span class="st">"y"</span>, <span class="dt">col =</span> <span class="kw">viridis</span>(<span class="dv">256</span>))</a>
<a class="sourceLine" id="cb1-14" title="14"></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(<span class="kw">raster</span>(samc<span class="op">::</span>ex_occ_data, <span class="dt">xmn =</span> <span class="dv">1</span>, <span class="dt">xmx =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">ncol</a></span>(samc<span class="op">::</span>ex_occ_data), <span class="dt">ymn =</span> <span class="dv">1</span>, <span class="dt">ymx =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(samc<span class="op">::</span>ex_occ_data)),</a>
<a class="sourceLine" id="cb1-16" title="16">     <span class="dt">main =</span> <span class="st">"Example Occupancy Data"</span>, <span class="dt">xlab =</span> <span class="st">"x"</span>, <span class="dt">ylab =</span> <span class="st">"y"</span>, <span class="dt">col =</span> <span class="kw">viridis</span>(<span class="dv">256</span>))</a></code></pre></div>
<p><img src="overview_files/figure-html/unnamed-chunk-1-1.png" width="700"><img src="overview_files/figure-html/unnamed-chunk-1-2.png" width="700"><img src="overview_files/figure-html/unnamed-chunk-1-3.png" width="700"></p>
</div>
</div>
<div id="the-samc-class" class="section level2">
<h2 class="hasAnchor">
<a href="#the-samc-class" class="anchor"></a>The <code>samc-class</code>
</h2>
<p>The <code>samc-class</code> is used to manage the transition matrix and information about your landscape data to help ensure that the calculations used by the rest of the package are used correctly. Creating an <code>samc-class</code> object is the mandatory first step in the package, and is created using the <code><a href="../reference/samc.html">samc()</a></code> utility function. The <code><a href="../reference/samc.html">samc()</a></code> function has several parameters. Some of these are mandatory, some are only mandatory in certain situations, and some are optional. The overall function signature is as follows:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="../reference/samc.html">samc</a></span>(resistance, absorption, fidelity, latlon, tr_fun, override)</a></code></pre></div>
<p>An explanation of the arguments:</p>
<ul>
<li>
<code>resistance</code> and <code>absorption</code> are always mandatory, and must meet the data requirements in the Data section above.</li>
<li>
<code>fidelity</code> is optional. If included, it must meet the data requirements outlined in the Data section above.</li>
<li>
<code>latlon</code> is mandatory when the input data is in a <code>RasterLayer</code> object. It should be set to either <code>TRUE</code> or <code>FALSE</code>.</li>
<li>
<code>tr_fun</code> is always mandatory. It is used to create the transition matrix.</li>
<li>
<code>override</code> is optional. It is used to control whether or not memory intensive functions can be run on the data. By default it is set to <code>FALSE</code> to prevent users from accidentally running these functions, which can potentially crash R if the computer does not have enough memory. The function documentation provides specific details for which calculations need the override, but in general it will rarely be useful for users and should be left off.</li>
</ul>
</div>
<div id="utility-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#utility-functions" class="anchor"></a>Utility Functions</h2>
<p>In addition to the extremely important <code><a href="../reference/samc.html">samc()</a></code> function, the package has other utility functions that users might find helpful:</p>
<ul>
<li>The <code><a href="../reference/check.html">check()</a></code> function is used to check that input landscape data meets the data requirements outlined above. It can be used to compare two <code>RasterLayer</code> objects, two <code>matrix</code> objects, or check either a <code>RasterLayer</code> or a <code>matrix</code> against an already created <code>samc-class</code> object.</li>
<li>The <code><a href="../reference/map.html">map()</a></code> function is used to simplify mapping vector data back into the landscape and return it as a <code>RasterLayer</code>. This is provided because R handles matrices and raster layers somewhat differently when reading and writing vector data, which can cause users to map the data incorrectly if they aren’t careful. It also handles mapping to landscapes with NA values, another potential source of error.</li>
</ul>
</div>
<div id="analytical-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#analytical-functions" class="anchor"></a>Analytical Functions</h2>
<p>The package implements functions for the formulas provided in Table 1 of Fletcher et al. (<a href="https://onlinelibrary.wiley.com/doi/full/10.1111/ele.13333">2019</a>). Many of the formulas are related conceptually, and are grouped together into single functions with multiple parameter signatures to reduce the number of unique function names needed. Note that the descriptions assume <span class="math inline">\(\psi\)</span> contains probability of occurrence. If <span class="math inline">\(\psi\)</span> instead contains the number of individuals, then the metrics with <span class="math inline">\(\psi\)</span> will return the number of expected individuals rather than a probability.</p>
<table class="table">
<colgroup>
<col width="30%">
<col width="30%">
<col width="39%">
</colgroup>
<thead><tr class="header">
<th align="left">Function</th>
<th align="left">Equation</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code><a href="../reference/dispersal.html">dispersal()</a></code></td>
<td align="left"><span class="math inline">\(\tilde{D}_{jt}=({\sum}_{n=0}^{t-1}\tilde{Q}^n)\tilde{q}_j\)</span></td>
<td align="left">Probability of an individual visiting a location, if starting at any other location, before or at time <em>t</em>
</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><span class="math inline">\(\psi^T\tilde{D}_{jt}\)</span></td>
<td align="left">Probability of an individual visiting a location, before or at time <em>t</em>, regardless of initial location</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"><span class="math inline">\(D=(F-I)diag(F)^{-1}\)</span></td>
<td align="left">Probability of an individual visiting a location</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><span class="math inline">\(\psi^TD\)</span></td>
<td align="left">Probability of an individual visiting a location, regardless of initial location</td>
</tr>
<tr class="odd">
<td align="left"><code><a href="../reference/distribution.html">distribution()</a></code></td>
<td align="left"><span class="math inline">\(Q^t\)</span></td>
<td align="left">Probability of an individual being at a location at time <em>t</em>
</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><span class="math inline">\(\psi^TQ^t\)</span></td>
<td align="left">Probability of an individual being at a location at time <em>t</em>, regardless of initial location</td>
</tr>
<tr class="odd">
<td align="left"><code><a href="../reference/mortality.html">mortality()</a></code></td>
<td align="left"><span class="math inline">\(\tilde{B}_t = (\sum_{n=0}^{t-1} Q^n) \tilde{R}\)</span></td>
<td align="left">Probability of an individual experiencing mortality at a location before or at time <em>t</em>
</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><span class="math inline">\(\psi^T \tilde{B}_t\)</span></td>
<td align="left">Probability of an individual experiencing mortality at a location, before or at time <em>t</em>, regardless of initial location</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"><span class="math inline">\(B = F \tilde{R}\)</span></td>
<td align="left">Probability of an individual experiencing mortality at a location</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><span class="math inline">\(\psi^T B\)</span></td>
<td align="left">Probability of an individual experiencing mortality at a location, regardless of initial location</td>
</tr>
<tr class="odd">
<td align="left"><code><a href="../reference/survival.html">survival()</a></code></td>
<td align="left"><span class="math inline">\(z=(I-Q)^{-1}{\cdot}1=F{\cdot}1\)</span></td>
<td align="left">Expected life expectancy of an individual</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><span class="math inline">\({\psi}^Tz\)</span></td>
<td align="left">Overall life expectancy, regardless of initial location</td>
</tr>
<tr class="odd">
<td align="left"><code><a href="../reference/visitation.html">visitation()</a></code></td>
<td align="left"><span class="math inline">\(F = (I-Q)^{-1}\)</span></td>
<td align="left">Expected number of times an individual visits a location</td>
</tr>
</tbody>
</table>
<p>Depending on the combination of inputs used, a function might return a single value, a vector, or a matrix. In some cases, the calculations will not be practical with sufficiently large landscape datasets due to memory and other performance constraints. To work around this, many equations have multiple associated function signatures that allow users to calculate individual portions of the result rather than the entire result. This opens up multiple optimizations that makes calculating many of the metrics more practical. More specific details about performance considerations can be found in the <a href="performance.html">Performance</a> vignette.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#data">Data</a></li>
      <li><a href="#the-samc-class">The <code>samc-class</code></a></li>
      <li><a href="#utility-functions">Utility Functions</a></li>
      <li><a href="#analytical-functions">Analytical Functions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Andrew Marx.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
