<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Rasterize input — rasterize • samc</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Rasterize input — rasterize"><meta name="description" content="Convert input to a SpatRaster object"><meta property="og:description" content="Convert input to a SpatRaster object"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">samc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/overview.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/article-circuit-theory.html">Circuit Theory</a></li>
    <li><a class="dropdown-item" href="../articles/article-computation-methods.html">Computation Methods</a></li>
    <li><a class="dropdown-item" href="../articles/article-models.html">Models</a></li>
    <li><a class="dropdown-item" href="../articles/performance.html">Performance</a></li>
    <li><a class="dropdown-item" href="../articles/parallel.html">Parallel Computing</a></li>
    <li><a class="dropdown-item" href="../articles/troubleshooting.html">Troubleshooting</a></li>
    <li><a class="dropdown-item" href="../articles/code-snippets.html">Code Snippets</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-data" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Data</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-data"><li><a class="dropdown-item" href="../articles/data-disconnected.html">Disconnected Data</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials"><li><a class="dropdown-item" href="../articles/tutorial-basic.html">Basic Tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-locations.html">Locations</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-ggplot.html">ggplot Visualization</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-temporal.html">Temporal Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-animations.html">Animations</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-multiple-absorption.html">Multiple Absorption</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples"><li><a class="dropdown-item" href="../articles/example-coinflip.html">Coin Flip</a></li>
    <li><a class="dropdown-item" href="../articles/example-maze-part1.html">Maze (Part 1)</a></li>
    <li><a class="dropdown-item" href="../articles/example-maze-part2.html">Maze (Part 2)</a></li>
    <li><a class="dropdown-item" href="../articles/example-maze-part3.html">Maze (Part 3)</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/andrewmarx/samc"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Rasterize input</h1>
      <small class="dont-index">Source: <a href="https://github.com/andrewmarx/samc/blob/HEAD/R/rasterize.R" class="external-link"><code>R/rasterize.R</code></a></small>
      <div class="d-none name"><code>rasterize.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Convert input to a SpatRaster object</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rasterize</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'matrix'</span></span>
<span><span class="fu">rasterize</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'RasterLayer'</span></span>
<span><span class="fu">rasterize</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'SpatRaster'</span></span>
<span><span class="fu">rasterize</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A matrix, RasterLayer, or SpatRaster</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A SpatRaster object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function is primarily used to convert an input matrix or raster to a SpatRaster
object. The main thing it is useful for is setting a standard extent and CRS for
converting matrices. It is used internally by the package to ensure consistent
results for the different data types for maps.</p>
<p>When converting matrices, the extents are set to match the number of rows and
columns of the matrix. Pixels in the result are centered on whole number coordinates
with (1,1) corresponding to the bottom left pixel. The CRS is set to "local", which
treats it as Euclidean (Cartesian) plane with the units in meters.</p>
<p>The main benefit will be for users that want an easy way to plot matrix data.
If the input type to the <code><a href="samc.html">samc</a></code> function is matrices, then the output
of <code><a href="map.html">map</a></code> will also be matrices. Plotting these matrices can require
more work than simply using SpatRaster objects for <code><a href="samc.html">samc</a></code> and getting
SpatRaster results back from <code><a href="map.html">map</a></code>.</p>
<p>The raster and terra packages both also have a rasterize function that serves
a different purpose. If either of these packages are used directly, then the order of
package loading becomes very important because it will determine which version
of rasterize is used by default.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># "Load" the data. In this case we are using data built into the package.</span></span></span>
<span class="r-in"><span><span class="co"># In practice, users will likely load raster data using the raster() function</span></span></span>
<span class="r-in"><span><span class="co"># from the raster package.</span></span></span>
<span class="r-in"><span><span class="va">res_data</span> <span class="op">&lt;-</span> <span class="fu">samc</span><span class="fu">::</span><span class="va"><a href="example_split_corridor.html">example_split_corridor</a></span><span class="op">$</span><span class="va">res</span></span></span>
<span class="r-in"><span><span class="va">abs_data</span> <span class="op">&lt;-</span> <span class="fu">samc</span><span class="fu">::</span><span class="va"><a href="example_split_corridor.html">example_split_corridor</a></span><span class="op">$</span><span class="va">abs</span></span></span>
<span class="r-in"><span><span class="va">init_data</span> <span class="op">&lt;-</span> <span class="fu">samc</span><span class="fu">::</span><span class="va"><a href="example_split_corridor.html">example_split_corridor</a></span><span class="op">$</span><span class="va">init</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Make sure our data meets the basic input requirements of the package using</span></span></span>
<span class="r-in"><span><span class="co"># the check() function.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="check.html">check</a></span><span class="op">(</span><span class="va">res_data</span>, <span class="va">abs_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu"><a href="check.html">check</a></span><span class="op">(</span><span class="va">res_data</span>, <span class="va">init_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Setup the details for a random-walk model</span></span></span>
<span class="r-in"><span><span class="va">rw_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">1</span><span class="op">/</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="co"># Function for calculating transition probabilities</span></span></span>
<span class="r-in"><span>                 dir <span class="op">=</span> <span class="fl">8</span>, <span class="co"># Directions of the transitions. Either 4 or 8.</span></span></span>
<span class="r-in"><span>                 sym <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Is the function symmetric?</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a `samc-class` object with the resistance and absorption data using</span></span></span>
<span class="r-in"><span><span class="co"># the samc() function. We use the recipricol of the arithmetic mean for</span></span></span>
<span class="r-in"><span><span class="co"># calculating the transition matrix. Note, the input data here are matrices,</span></span></span>
<span class="r-in"><span><span class="co"># not RasterLayers.</span></span></span>
<span class="r-in"><span><span class="va">samc_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="samc.html">samc</a></span><span class="op">(</span><span class="va">res_data</span>, <span class="va">abs_data</span>, model <span class="op">=</span> <span class="va">rw_model</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert the initial state data to probabilities</span></span></span>
<span class="r-in"><span><span class="va">init_prob_data</span> <span class="op">&lt;-</span> <span class="va">init_data</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">init_data</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate short- and long-term metrics using the analytical functions</span></span></span>
<span class="r-in"><span><span class="va">short_mort</span> <span class="op">&lt;-</span> <span class="fu"><a href="mortality.html">mortality</a></span><span class="op">(</span><span class="va">samc_obj</span>, <span class="va">init_prob_data</span>, time <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">short_dist</span> <span class="op">&lt;-</span> <span class="fu"><a href="distribution.html">distribution</a></span><span class="op">(</span><span class="va">samc_obj</span>, origin <span class="op">=</span> <span class="fl">3</span>, time <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">long_disp</span> <span class="op">&lt;-</span> <span class="fu"><a href="dispersal.html">dispersal</a></span><span class="op">(</span><span class="va">samc_obj</span>, <span class="va">init_prob_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cached diagonal not found.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Performing setup. This can take several minutes... Complete.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Calculating matrix inverse diagonal...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Computing: 48%  (~10s remaining)       Computing: 96%  (~0s remaining)       Computing: 100% (done)                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Complete                                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Diagonal has been cached. Continuing with metric calculation...</span>
<span class="r-in"><span><span class="va">visit</span> <span class="op">&lt;-</span> <span class="fu"><a href="visitation.html">visitation</a></span><span class="op">(</span><span class="va">samc_obj</span>, dest <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">surv</span> <span class="op">&lt;-</span> <span class="fu"><a href="survival.html">survival</a></span><span class="op">(</span><span class="va">samc_obj</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use the map() function to turn vector results into RasterLayer objects.</span></span></span>
<span class="r-in"><span><span class="va">short_mort_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="map.html">map</a></span><span class="op">(</span><span class="va">samc_obj</span>, <span class="va">short_mort</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">short_dist_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="map.html">map</a></span><span class="op">(</span><span class="va">samc_obj</span>, <span class="va">short_dist</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">long_disp_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="map.html">map</a></span><span class="op">(</span><span class="va">samc_obj</span>, <span class="va">long_disp</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">visit_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="map.html">map</a></span><span class="op">(</span><span class="va">samc_obj</span>, <span class="va">visit</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">surv_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="map.html">map</a></span><span class="op">(</span><span class="va">samc_obj</span>, <span class="va">surv</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrew Marx.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

