<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create an samc object — samc • samc</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create an samc object — samc" />
<meta property="og:description" content="Create an samc object that contains the absorbing Markov chain data" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">samc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/overview.html">Overview</a>
    </li>
    <li>
      <a href="../articles/performance.html">Performance</a>
    </li>
    <li>
      <a href="../articles/troubleshooting.html">Troubleshooting</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/tutorial-basic.html">Basic Tutorial</a>
    </li>
    <li>
      <a href="../articles/tutorial-ggplot.html">ggplot Visualization</a>
    </li>
    <li>
      <a href="../articles/tutorial-temporal.html">Temporal Analysis</a>
    </li>
    <li>
      <a href="../articles/tutorial-animations.html">Animations</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/andrewmarx/samc">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create an samc object</h1>
    <small class="dont-index">Source: <a href='https://github.com/andrewmarx/samc/blob/master/R/samc.R'><code>R/samc.R</code></a></small>
    <div class="hidden name"><code>samc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create an samc object that contains the absorbing Markov chain data</p>
    </div>

    <pre class="usage"><span class='fu'>samc</span>(<span class='no'>resistance</span>, <span class='no'>absorption</span>, <span class='no'>fidelity</span>, <span class='no'>latlon</span>, <span class='no'>tr_fun</span>, <span class='no'>p_mat</span>, <span class='no'>...</span>)

<span class='co'># S4 method for RasterLayer,RasterLayer,RasterLayer,logical,`function`,missing</span>
<span class='fu'>samc</span>(<span class='no'>resistance</span>, <span class='no'>absorption</span>, <span class='no'>fidelity</span>, <span class='no'>latlon</span>, <span class='no'>tr_fun</span>, <span class='kw'>override</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># S4 method for RasterLayer,RasterLayer,missing,logical,`function`,missing</span>
<span class='fu'>samc</span>(<span class='no'>resistance</span>, <span class='no'>absorption</span>, <span class='no'>latlon</span>, <span class='no'>tr_fun</span>, <span class='kw'>override</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># S4 method for matrix,matrix,matrix,missing,`function`,missing</span>
<span class='fu'>samc</span>(<span class='no'>resistance</span>, <span class='no'>absorption</span>, <span class='no'>fidelity</span>, <span class='no'>tr_fun</span>, <span class='kw'>override</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># S4 method for matrix,matrix,missing,missing,`function`,missing</span>
<span class='fu'>samc</span>(<span class='no'>resistance</span>, <span class='no'>absorption</span>, <span class='no'>tr_fun</span>, <span class='kw'>override</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># S4 method for missing,missing,missing,missing,missing,dgCMatrix</span>
<span class='fu'>samc</span>(<span class='no'>p_mat</span>, <span class='kw'>override</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># S4 method for missing,missing,missing,missing,missing,matrix</span>
<span class='fu'>samc</span>(<span class='no'>p_mat</span>, <span class='kw'>override</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>resistance</th>
      <td><p>A <code><a href='https://rdrr.io/pkg/raster/man/Raster-classes.html'>RasterLayer-class</a></code> or <code><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></code></p></td>
    </tr>
    <tr>
      <th>absorption</th>
      <td><p>A <code><a href='https://rdrr.io/pkg/raster/man/Raster-classes.html'>RasterLayer-class</a></code> or <code><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></code></p></td>
    </tr>
    <tr>
      <th>fidelity</th>
      <td><p>A <code><a href='https://rdrr.io/pkg/raster/man/Raster-classes.html'>RasterLayer-class</a></code> or <code><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></code></p></td>
    </tr>
    <tr>
      <th>latlon</th>
      <td><p>Logical (<code>TRUE</code> or <code>FALSE</code>) indicating whether the rasters use latitude/longitude</p></td>
    </tr>
    <tr>
      <th>tr_fun</th>
      <td><p>A function to calculate the transition values in the <code><a href='https://rdrr.io/pkg/gdistance/man/transition.html'>transition</a></code> function</p></td>
    </tr>
    <tr>
      <th>p_mat</th>
      <td><p>A base R <code><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></code> object or Matrix package dgCMatrix sparse matrix</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Placeholder</p></td>
    </tr>
    <tr>
      <th>override</th>
      <td><p>Optional flag to prevent accidentally running memory intensive functions. Defaults to <code>FALSE</code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A spatial absorbing Markov chain object</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function is used to create a <code><a href='samc-class.html'>samc-class</a></code> object. There are
two options for creating this object.</p>
<p><strong>Option 1: Raster and Matrix Inputs</strong></p>
<p>The <code><a href='samc-class.html'>samc-class</a></code> object can be created from a combination of
resistance, absorption, and fidelity data. These different landscape data
inputs must be the same type (a matrix or RasterLayer), and have identical
properties, including dimensions, location of NA cells, and CRS (if using
RasterLayers). Some of the inputs are mandatory, whereas others are optional.</p>
<p>The resistance and absorption inputs are always mandatory, whereas the
fidelity input is optional. If the fidelity input is not provided, then it it
is assumed that there is no site fidelity (i.e., individuals will always move
to an adjacent cell each time step).</p>
<p>The latlon parameter is required if the landscape data inputs are RasterLayer
objects. The package does not attempt to determine this automatically, and it
does not assume a default. Users must set it to TRUE if they are using
latitude and longitude data.</p>
<p>The tr_fun parameter is mandatory. It used when calculating the values for
the transition matrix. Internally, this is passed to the <code><a href='https://rdrr.io/pkg/gdistance/man/transition.html'>transition</a></code>
function in the gdistance package to create the transition matrix.</p>
<p><strong>Option 2: P Matrix Input</strong></p>
<p>The p_mat parameter can be used to create a <code><a href='samc-class.html'>samc-class</a></code> object
directly from a preconstructed P matrix. This matrix must be either a base R
matrix, or a sparse matrix (dgCMatrix format) from the Matrix package. It
must meet the requirement of a P matrix described in Fletcher et al. (2019).
This includes:</p><ul>
<li><p>The number of rows must equal the number of columns (a square matrix)</p></li>
<li><p>The last row must contain all 0's, except the last element, which must be 1</p></li>
<li><p>Each row must sum to 1</p></li>
<li><p>All values must be in the range of 0-1</p></li>
</ul>

<p><strong>Other Parameters</strong></p>
<p>The override parameter is optional. To prevent users from unintentionally
running memory intensive versions of functions that could make their systems
non-responsive or crash software, it is set to FALSE by default. For various
reasons, it can be set to TRUE. In particular, a user might do this if they
are using a very small landscape dataset, or perhaps for a moderately sized
dataset if they have access to a system with exceptionally large amounts of
RAM. Before setting this to TRUE, users should read the Performance vignette/
article to understand the expected memory requirements. They should also
consider starting with scaled down version of their data and then gradually
scaling back up while monitoring their memory usage as a means to gauge what
is reasonable for their system.</p>
<p><strong>Additional Information</strong></p>
<p>Depending on the data used to construct the samc-class object, some metrics
may cause crashes. This is a result of the underlying P matrix having specific
properties that make some equations unsolvable. One known case is a P matrix
that represents a disconnected graph, which can lead to the cond_passage()
function crashing. In terms of raster/matrix inputs, a disconnected graph
occurs when one or more pixels/cells are unreachable from other pixels/cells
due to the presence of a full barrier made up of NA values. In a raster, these
may be obvious as islands, but can be as inconspicuous as a rogue isolated
pixel. There may be other currently unknown situations that lead to unsolvable
metrics.</p>
<p>Future work is planned towards identifying these issues during creation of the
samc-class object and handling them appropriately to prevent inadvertent
crashes.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># "Load" the data. In this case we are using data built into the package.</span>
<span class='co'># In practice, users will likely load raster data using the raster() function</span>
<span class='co'># from the raster package.</span>
<span class='no'>res_data</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>samc</span><span class='kw ns'>::</span><span class='no'><a href='ex_res_data.html'>ex_res_data</a></span>
<span class='no'>abs_data</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>samc</span><span class='kw ns'>::</span><span class='no'><a href='ex_abs_data.html'>ex_abs_data</a></span>
<span class='no'>occ_data</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>samc</span><span class='kw ns'>::</span><span class='no'><a href='ex_occ_data.html'>ex_occ_data</a></span>


<span class='co'># Make sure our data meets the basic input requirements of the package using</span>
<span class='co'># the check() function.</span>
<span class='fu'><a href='check.html'>check</a></span>(<span class='no'>res_data</span>, <span class='no'>abs_data</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='fu'><a href='check.html'>check</a></span>(<span class='no'>res_data</span>, <span class='no'>occ_data</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>

<span class='co'># Create a `samc-class` object with the resistance and absorption data using</span>
<span class='co'># the samc() function. We use the recipricol of the arithmetic mean for</span>
<span class='co'># calculating the transition matrix. Note, the input data here are matrices,</span>
<span class='co'># not RasterLayers. If using RasterLayers, the latlon parameter must be set.</span>
<span class='no'>samc_obj</span> <span class='kw'>&lt;-</span> <span class='fu'>samc</span>(<span class='no'>res_data</span>, <span class='no'>abs_data</span>, <span class='kw'>tr_fun</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fl'>1</span>/<span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>x</span>))


<span class='co'># Convert the occupancy data to probability of occurrence</span>
<span class='no'>occ_prob_data</span> <span class='kw'>&lt;-</span> <span class='no'>occ_data</span> / <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>occ_data</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)


<span class='co'># Calculate short- and long-term metrics using the analytical functions</span>
<span class='no'>short_mort</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='mortality.html'>mortality</a></span>(<span class='no'>samc_obj</span>, <span class='no'>occ_prob_data</span>, <span class='kw'>time</span> <span class='kw'>=</span> <span class='fl'>50</span>)
<span class='no'>short_dist</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='distribution.html'>distribution</a></span>(<span class='no'>samc_obj</span>, <span class='kw'>origin</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>time</span> <span class='kw'>=</span> <span class='fl'>50</span>)
<span class='no'>long_disp</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='dispersal.html'>dispersal</a></span>(<span class='no'>samc_obj</span>, <span class='no'>occ_prob_data</span>)</div><div class='output co'>#&gt; Performing setup. This can take several minutes... Complete.
#&gt; Calculating matrix inverse diagonal...Calculating matrix inverse diagonal... Complete                                           
#&gt; Performing final calculations. This may take a few minutes... Complete.</div><div class='input'><span class='no'>visit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='visitation.html'>visitation</a></span>(<span class='no'>samc_obj</span>, <span class='kw'>dest</span> <span class='kw'>=</span> <span class='fl'>4</span>)
<span class='no'>surv</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='survival.html'>survival</a></span>(<span class='no'>samc_obj</span>)


<span class='co'># Use the map() function to turn vector results into RasterLayer objects.</span>
<span class='no'>short_mort_map</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='map.html'>map</a></span>(<span class='no'>samc_obj</span>, <span class='no'>short_mort</span>)
<span class='no'>short_dist_map</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='map.html'>map</a></span>(<span class='no'>samc_obj</span>, <span class='no'>short_dist</span>)
<span class='no'>long_disp_map</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='map.html'>map</a></span>(<span class='no'>samc_obj</span>, <span class='no'>long_disp</span>)
<span class='no'>visit_map</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='map.html'>map</a></span>(<span class='no'>samc_obj</span>, <span class='no'>visit</span>)
<span class='no'>surv_map</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='map.html'>map</a></span>(<span class='no'>samc_obj</span>, <span class='no'>surv</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Andrew Marx.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


