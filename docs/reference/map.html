<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Map vector data — map • samc</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Map vector data — map"><meta property="og:description" content="Map vector data to a RasterLayer"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">samc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/overview.html">Overview</a>
    </li>
    <li>
      <a href="../articles/article-circuit-theory.html">Circuit Theory</a>
    </li>
    <li>
      <a href="../articles/performance.html">Performance</a>
    </li>
    <li>
      <a href="../articles/parallel.html">Parallel Computing</a>
    </li>
    <li>
      <a href="../articles/troubleshooting.html">Troubleshooting</a>
    </li>
    <li>
      <a href="../articles/code-snippets.html">Code Snippets</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Data
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/data-disconnected.html">Disconnected Data</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/tutorial-basic.html">Basic Tutorial</a>
    </li>
    <li>
      <a href="../articles/tutorial-locations.html">Locations</a>
    </li>
    <li>
      <a href="../articles/tutorial-ggplot.html">ggplot Visualization</a>
    </li>
    <li>
      <a href="../articles/tutorial-temporal.html">Temporal Analysis</a>
    </li>
    <li>
      <a href="../articles/tutorial-animations.html">Animations</a>
    </li>
    <li>
      <a href="../articles/tutorial-multiple-absorption.html">Multiple Absorption</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/example-coinflip.html">Coin Flip</a>
    </li>
    <li>
      <a href="../articles/example-maze-part1.html">Maze (Part 1)</a>
    </li>
    <li>
      <a href="../articles/example-maze-part2.html">Maze (Part 2)</a>
    </li>
    <li>
      <a href="../articles/example-maze-part3.html">Maze (Part 3)</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/andrewmarx/samc" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Map vector data</h1>
    <small class="dont-index">Source: <a href="https://github.com/andrewmarx/samc/blob/HEAD/R/map.R" class="external-link"><code>R/map.R</code></a></small>
    <div class="hidden name"><code>map.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Map vector data to a RasterLayer</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">map</span><span class="op">(</span><span class="va">samc</span>, <span class="va">vec</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for samc,numeric</span></span>
<span><span class="fu">map</span><span class="op">(</span><span class="va">samc</span>, <span class="va">vec</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for samc,list</span></span>
<span><span class="fu">map</span><span class="op">(</span><span class="va">samc</span>, <span class="va">vec</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>samc</dt>
<dd><p>Spatial absorbing Markov chain object. This should be output from the samc() function.</p></dd>


<dt>vec</dt>
<dd><p>Vector data to fill into the map.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A RasterLayer object</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This is a convenience function to ensure that vector data is properly mapped
back to the original landscape data. The reason this is needed is that the
package supports both matrices and RasterLayers, which differ in the order
that data is read and written (R matrices are column-major order, whereas the
raster package uses row-major order). Internally, the package uses only a
single order, regardless of the original data. This can cause issues with
mapping vector results if care is not taken, and this function is provided to
simplify the process. It also correctly maps results for landscape data that
has NA cells, which are another potential source of error if not careful.</p>
<p>The only requirement of the <code>vec</code> input is that the number of elements
in it matches the number of non-NA cells in the landscape data that was used
to create the samc object.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># "Load" the data. In this case we are using data built into the package.</span></span></span>
<span class="r-in"><span><span class="co"># In practice, users will likely load raster data using the raster() function</span></span></span>
<span class="r-in"><span><span class="co"># from the raster package.</span></span></span>
<span class="r-in"><span><span class="va">res_data</span> <span class="op">&lt;-</span> <span class="fu">samc</span><span class="fu">::</span><span class="va"><a href="ex_res_data.html">ex_res_data</a></span></span></span>
<span class="r-in"><span><span class="va">abs_data</span> <span class="op">&lt;-</span> <span class="fu">samc</span><span class="fu">::</span><span class="va"><a href="ex_abs_data.html">ex_abs_data</a></span></span></span>
<span class="r-in"><span><span class="va">occ_data</span> <span class="op">&lt;-</span> <span class="fu">samc</span><span class="fu">::</span><span class="va"><a href="ex_occ_data.html">ex_occ_data</a></span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Make sure our data meets the basic input requirements of the package using</span></span></span>
<span class="r-in"><span><span class="co"># the check() function.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="check.html">check</a></span><span class="op">(</span><span class="va">res_data</span>, <span class="va">abs_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu"><a href="check.html">check</a></span><span class="op">(</span><span class="va">res_data</span>, <span class="va">occ_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Setup the details for our transition function</span></span></span>
<span class="r-in"><span><span class="va">tr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">1</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="co"># Function for calculating transition probabilities</span></span></span>
<span class="r-in"><span>           dir <span class="op">=</span> <span class="fl">8</span>, <span class="co"># Directions of the transitions. Either 4 or 8.</span></span></span>
<span class="r-in"><span>           sym <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Is the function symmetric?</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a `samc-class` object with the resistance and absorption data using</span></span></span>
<span class="r-in"><span><span class="co"># the samc() function. We use the recipricol of the arithmetic mean for</span></span></span>
<span class="r-in"><span><span class="co"># calculating the transition matrix. Note, the input data here are matrices,</span></span></span>
<span class="r-in"><span><span class="co"># not RasterLayers.</span></span></span>
<span class="r-in"><span><span class="va">samc_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="samc.html">samc</a></span><span class="op">(</span><span class="va">res_data</span>, <span class="va">abs_data</span>, tr_args <span class="op">=</span> <span class="va">tr</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert the occupancy data to probability of occurrence</span></span></span>
<span class="r-in"><span><span class="va">occ_prob_data</span> <span class="op">&lt;-</span> <span class="va">occ_data</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">occ_data</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate short- and long-term metrics using the analytical functions</span></span></span>
<span class="r-in"><span><span class="va">short_mort</span> <span class="op">&lt;-</span> <span class="fu"><a href="mortality.html">mortality</a></span><span class="op">(</span><span class="va">samc_obj</span>, <span class="va">occ_prob_data</span>, time <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">short_dist</span> <span class="op">&lt;-</span> <span class="fu"><a href="distribution.html">distribution</a></span><span class="op">(</span><span class="va">samc_obj</span>, origin <span class="op">=</span> <span class="fl">3</span>, time <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">long_disp</span> <span class="op">&lt;-</span> <span class="fu"><a href="dispersal.html">dispersal</a></span><span class="op">(</span><span class="va">samc_obj</span>, <span class="va">occ_prob_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cached diagonal not found.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Performing setup. This can take several minutes... Complete.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Calculating matrix inverse diagonal...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Computing: 49%  (~10s remaining)       Computing: 97%  (~0s remaining)       Computing: 100% (done)                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Complete                                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Diagonal has been cached. Continuing with metric calculation...</span>
<span class="r-in"><span><span class="va">visit</span> <span class="op">&lt;-</span> <span class="fu"><a href="visitation.html">visitation</a></span><span class="op">(</span><span class="va">samc_obj</span>, dest <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">surv</span> <span class="op">&lt;-</span> <span class="fu"><a href="survival.html">survival</a></span><span class="op">(</span><span class="va">samc_obj</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use the map() function to turn vector results into RasterLayer objects.</span></span></span>
<span class="r-in"><span><span class="va">short_mort_map</span> <span class="op">&lt;-</span> <span class="fu">map</span><span class="op">(</span><span class="va">samc_obj</span>, <span class="va">short_mort</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">short_dist_map</span> <span class="op">&lt;-</span> <span class="fu">map</span><span class="op">(</span><span class="va">samc_obj</span>, <span class="va">short_dist</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">long_disp_map</span> <span class="op">&lt;-</span> <span class="fu">map</span><span class="op">(</span><span class="va">samc_obj</span>, <span class="va">long_disp</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">visit_map</span> <span class="op">&lt;-</span> <span class="fu">map</span><span class="op">(</span><span class="va">samc_obj</span>, <span class="va">visit</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">surv_map</span> <span class="op">&lt;-</span> <span class="fu">map</span><span class="op">(</span><span class="va">samc_obj</span>, <span class="va">surv</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Andrew Marx.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

